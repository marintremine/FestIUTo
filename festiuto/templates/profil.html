{% extends "base.html" %}
{% block head %}

<link rel="stylesheet" href="{{url_for('static', filename='css/profil.css')}}">
<script src="https://unpkg.com/htmx.org@1.9.9"></script>
{% endblock %}
{% block main %}

<section>
    <h1 class="title">MON PROFIL</h1>
</section>

<section class="profil">
{% if not edit %}
{% block details %}
    <div hx-target="this" hx-swap="outerHTML">
        <div class="criteria"><label>Prénom :</label><span class="result">{{ current_user.prenomV }}</span></div>
        <div class="criteria"><label>Nom de famille :</label><span class="result">{{ current_user.nomV }}</span></div>
        <div class="criteria"><label>Email :</label><span class="result">{{ current_user.email }}</span></div>
        <div class="criteria"><label>Date de naissance :</label><span class="result">{{ current_user.dateNaissV }}</span></div>
        <div class="criteria"><label>Numero de telephone :</label><span class="result">{{ current_user.numtel }}</span></div>
        <button hx-get="/profil" class="btn btn-primary">
            EDITER MON PROFIL
        </button>
    </div>
{% endblock %}
{% endif %}

{% if edit %}
{% block edit %}


<form action="/profil" method="POST" hx-target="this" hx-swap="outerHTML">
    {{ form.csrf_token }}
    <div class="criteria">
        <label>Prénom :</label>
        {{ form.firstname }}
    </div>
    {% if form.firstname.errors %}
        <ul class="errors">
        {% for error in form.firstname.errors %}
            <li>{{ error }}</li>
        {% endfor %}
        </ul>
    {% endif %}
    <div class="criteria">
        <label>Nom de famille :</label>
        {{ form.lastname }}
    </div>
    {% if form.lastname.errors %}
        <ul class="errors">
        {% for error in form.lastname.errors %}
            <li>{{ error }}</li>
        {% endfor %}
        </ul>
    {% endif %}
    <div class="criteria">
        <label>Email :</label>
        {{ form.email }}
    </div>
    {% if form.email.errors %}
        <ul class="errors">
        {% for error in form.email.errors %}
            <li>{{ error }}</li>
        {% endfor %}
        </ul>
    {% endif %}
    <div class="criteria">
        <label>Date de naissance :</label>
        {{ form.birthdate }}
    </div>
    {% if form.birthdate.errors %}
        <ul class="errors">
        {% for error in form.birthdate.errors %}
            <li>{{ error }}</li>
        {% endfor %}
        </ul>
    {% endif %}
    <div class="criteria">
        <label>Numero de telephone :</label>
        {{ form.numtel }}
    </div>
    {% if form.numtel.errors %}
        <ul class="errors">
        {% for error in form.numtel.errors %}
            <li>{{ error }}</li>
        {% endfor %}
        </ul>
    {% endif %}
    <button class="btn">METTRE A JOUR</button>
    <button class="btn" hx-post="/profil">ANNULER</button>
</form>
{% endblock %}

</section>
{% endif %}

{% endblock %}