{% extends "base.html" %}
{% block head %}

<link rel="stylesheet" href="{{url_for('static', filename='css/profil.css')}}">
<script src="https://unpkg.com/htmx.org@1.9.9"></script>
{% endblock %}
{% block main %}

{% if not edit %}
{% block details %}
    <div hx-target="this" hx-swap="outerHTML">
        <div><label>Prénom</label> : {{ current_user.prenomV }}</div>
        <div><label>Nom de famille</label> : {{ current_user.nomV }}</div>
        <div><label>Email</label> : {{ current_user.email }}</div>
        <div><label>Date de naissance</label> : {{ current_user.dateNaissV }}</div>
        <div><label>Numero de telephone</label> : {{ current_user.numtel }}</div>
        <button hx-get="/profil" class="btn btn-primary">
        Editer mon profil
        </button>
    </div>
{% endblock %}
{% endif %}

{% if edit %}
{% block edit %}


<form action="/profil" method="POST" hx-target="this" hx-swap="outerHTML">
    {{ form.csrf_token }}
    <div>
        <label>Prénom</label> : 
      {{ form.firstname }}
    </div>
    {% if form.firstname.errors %}
        <ul class="errors">
        {% for error in form.firstname.errors %}
            <li>{{ error }}</li>
        {% endfor %}
        </ul>
    {% endif %}
    <div>
        <label>Nom de famille</label> : 
      {{ form.lastname }}
    </div>
    {% if form.lastname.errors %}
        <ul class="errors">
        {% for error in form.lastname.errors %}
            <li>{{ error }}</li>
        {% endfor %}
        </ul>
    {% endif %}
    <div>
        <label>Email</label> :
      {{ form.email }}
    </div>
    {% if form.email.errors %}
        <ul class="errors">
        {% for error in form.email.errors %}
            <li>{{ error }}</li>
        {% endfor %}
        </ul>
    {% endif %}
    <div>
        <label>Date de naissance</label> :
      {{ form.birthdate }}
    </div>
    {% if form.birthdate.errors %}
        <ul class="errors">
        {% for error in form.birthdate.errors %}
            <li>{{ error }}</li>
        {% endfor %}
        </ul>
    {% endif %}
    <div>
        <label>Numero de telephone</label> :
      {{ form.numtel }}
    </div>
    {% if form.numtel.errors %}
        <ul class="errors">
        {% for error in form.numtel.errors %}
            <li>{{ error }}</li>
        {% endfor %}
        </ul>
    {% endif %}
    <button class="btn">Mettre à jour</button>
    <button class="btn" hx-post="/profil">Annuler</button>
</form>
{% endblock %}
{% endif %}

{% endblock %}